#+TITLE: Android Applications
* Android App
** Contacts
** MMS
** Phone
** VCard
*** import from .vcf
**** Parser
import 的过程从 parser 开始:
#+begin_src java
  VCardParser.parse(InputStream, VCardInterpreter)
    interpreter.onVCardStarted()
    parseOneVCard()
      parseItems()
        parseItem()
          interpreter.onPropertyCreated()
    interpreter.onVCardEnded()
  
#+end_src java

parse 在 parse 过程中
- 检测到V CARD:BEGIN 时, 调用 interpreter.onVCardStarted
- 检测到V CARD:END 时, 调用 interpreter.onVCardEnded
- 检测到其它 property 时, 调用 interpreter.onPropertyCreated

parser 只负责 parse, parse 出来的信息的保存和处理由 interpreter 决定

**** Interpreter
import 时使用的 interpreter 是 VCardEntryConstructor, 它的三个函数:
- onVCardStarted
- onVCardEnded
- onPropertyCreated
会负责保存 parser 的信息到 VCardEntry, 在 parse 结束 (onVCardEnded) 时, 由
VCardEntryHandler去处理 (例如: 保存到数据库)

**** commiter
VCardEntryCommitter 继承自 VCardEntryHandler, 其实现的三个函数负责将 interpreter
保存的 VCardEntry commit 到数据库中:
- onStart
- onEnd
- onEntryCreated

其中 onEntryCreated 真正负责将 interpreter 保存的 VCardEntry 写到数据库

*** export to .vcf
相比 import from .vcf,  export 简单的多, 因为不需要 parse.

**** VCardComposer
基本上只是调用 VCardComposer 查询数据库, 将数据拼成一个 .vcf 就可以了.
